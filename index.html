<!doctype html>  

<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Dash</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="stylesheet" href="css/style.css?v=2">

  <script src="js/libs/modernizr-1.6.min.js"></script>
  	<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<style>
@font-face {
	/* This declaration targets everything else */
	font-family: 'kimidorimugcupRegular';
	src: url(//:) format('no404'), url('kimidori_mugcup-webfont.woff') format('woff'), url('kimidori_mugcup-webfont.ttf') format('truetype'), url('kimidori_mugcup-webfont.svg#webfontmQ8hmB0E') format('svg');
	font-weight: normal;
	font-style: normal;
}
	.ui-widget {
		width:430px;
		margin:5px auto;
	}
	.ui-widget-header {
		padding:2px;
	}
	.close, .settings{
		float:right;
	}
	table {
		display:none;
	}
	.column {
		min-width:33%;
		float:left;
		min-height:500px;
	}
	li {
		list-style:none;
	}
	header h1{

			font-family: kimidorimugcupRegular, sans-serif; 
			font-size:44px;
		    color:#002277;
		
		float:left;
	}
	header {
		background-color: #DDDDDD;
		padding:10px 10px 0 10px;
	}
	header #time {
		font-family: kimidorimugcupRegular, sans-serif; 
		font-size:12px;
	    color:#002277;
	
	float:left;
	}
	body {
		
	}
	#switcher {
		float:right;
	}
	</style>

</head>

<body>

  <div id="container">
    <header class='ui-helper-clearfix'>
		<h1>Dash</h1>
		<div id="time"></div>
		<div id="switcher"></div>
    </header>
    
    <div id="main" class="column">
		
		<div class="ui-widget">
		 <div class="ui-widget-header ui-corner-top">Browsers
		 <a href="#" class="ui-icon ui-icon-closethick close">x</a></div>
		 <div class="ui-widget-content ui-corner-bottom">
		  	<table>
				<caption>Browser Stats</caption>
				<thead>
					<tr>
						<td></td>
						<th scope="col">food</th>
						<th scope="col">auto</th>
						<th scope="col">household</th>
						<th scope="col">furniture</th>
						<th scope="col">kitchen</th>
						<th scope="col">bath</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th scope="row">Mary</th>
						<td>190</td>
						<td>160</td>
						<td>40</td>
						<td>120</td>
						<td>30</td>
						<td>70</td>
					</tr>
					<tr>
						<th scope="row">Tom</th>
						<td>3</td>
						<td>40</td>
						<td>30</td>
						<td>45</td>
						<td>35</td>
						<td>49</td>
					</tr>
				</tbody>
			</table>
		 </div>
		</div>
		
				
    </div>
<div id="main2" class="column"></div>
<divid="main3" class="column"></div>
    <footer>

    </footer>
  </div> <!-- end of #container -->


<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.5.min.js"></script>
<script src="https://github.com/jquery/jquery-tmpl/raw/master/jquery.tmpl.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<script src="http://jqueryui.com/themeroller/themeswitchertool/"></script>
<script src="js/mylibs/visualize.jQuery.js"></script>
<script src="js/mylibs/jquery.tweet.js"></script>
<script>
	function renderTime() {
		
		var currentTime = new Date();
		$("#time").text(currentTime.toGMTString());
		setTimeout('renderTime()', 1000);
	}
	renderTime();
</script>
<script id="widgetTemplate" type="text/x-jquery-tmpl"> 
	<div class="ui-widget" id="${id}">
		<div class="ui-widget-header ui-corner-top">
		    ${heading}
			<a href="#" class="ui-icon ui-icon-closethick close">x</a>
			<a href="#" class="ui-icon ui-icon-wrench settings">x</a>
		</div>
		
	 	<div class="ui-widget-content ui-corner-bottom">
		<div class="sets">
		    
		</div></div>
	</div>
</script>  
<script>
var DashWidget = {
	
	_init: function() {
		$( "#widgetTemplate" ).tmpl( this.options ).appendTo( this.element );
		var that = this;
		$(".settings", "#"+this.options.id).click(function(){that.editSettings(that.options.id)})
	},
	
	editSettings: function(id){
		var settings = "<div class='ui-corner-bottom'><form><input type='text' name='heading' /><input type=\"submit\" value=\"Save\"></form></div>";
		$(".ui-widget").addClass("ui-state-disabled")
		
		$(".ui-widget-content", "#"+id).children().hide().fadeOut();
		$(".ui-widget-content .sets", "#"+id).append(settings).fadeIn();
		$("#"+id).addClass("ui-state-highlight").removeClass("ui-state-disabled")
	},
	
	options: {
		heading:'Default Widget',
		interval:60*60,
		id:'0'
	}
}
$.widget('ui.dash',DashWidget);

var Twitter = $.extend({}, $.ui.dash.prototype, {

	getQuery: function() {return this.options.query;},
	setQuery: function(x) {this.options.query=x;},
	_init: function(){
		$.ui.dash.prototype._init.call(this);
		$(".ui-widget-content", "#"+this.options.id).tweet({query: this.getQuery(), join_text: "auto",
		            avatar_size: 32,
		            count: 3,
		            loading_text: "loading tweets..."});
	},
	options: {
		heading:'Twitter',
		query:'sky',
		id: 'twitter'
	}
});
$.widget('ui.twitter',Twitter);

var DataVisualise = $.extend({}, $.ui.dash.prototype, {

	_init: function(){
		$.ui.dash.prototype._init.call(this);
		var table = $("<table>");
		table.append("<tr><th scope=\"row\">ie</th><td>30</td></tr>");
		table.append("<tr><th scope=\"row\">Firefox</th><td>70</td></tr>");
		$(".ui-widget-content", "#"+this.options.id).append(table);
		
		table.visualize({
			type: this.options.type,
			height: '300px', 
			width: '420px'
		});
	},
	options: {
		heading:'Browsers',
		dataSet:'',
		chartType:'pie',
		id: 'browsers'
	}
});
$.widget('ui.dataVisualise',DataVisualise);

$(document).ready(function(){
	$(".column").sortable({ connectWith: '.column' });
	$('#switcher').themeswitcher();
	$('table').visualize({type: 'pie', height: '300px', width: '420px'});
	
	
	$('#main').twitter({
		query:'RickyHatton'
	});
	
	$('#main').dataVisualise({
		chartType:'pie'
	});
})
</script>

  <!-- scripts concatenated and minified via ant build script-->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>
  <!-- end concatenated and minified scripts-->
  
  
  <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script> DD_belatedPNG.fix('img, .png_bg'); </script>
  <![endif]-->

  
</body>
</html>